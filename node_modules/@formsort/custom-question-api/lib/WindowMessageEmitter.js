"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const events_1 = require("events");
// import from directory for tree shaking
const custom_question_message_1 = tslib_1.__importDefault(require("@formsort/constants/lib/custom-question-message"));
const EVENTS_TO_EMIT = new Set([
    custom_question_message_1.default.SET_ANSWERS_MSG,
    custom_question_message_1.default.SET_ANSWER_VALUE_MSG,
    custom_question_message_1.default.SET_RESPONDER_UUID_MSG,
    custom_question_message_1.default.SET_SEMANTIC_ANSWER_VALUE_MSG,
]);
class WindowMessageEventsEmitter extends events_1.EventEmitter {
    constructor() {
        super();
        this.onWindowMessage = (e) => {
            const { type, payload, requestId } = e.data;
            if (typeof type !== 'string' ||
                !EVENTS_TO_EMIT.has(type)) {
                return;
            }
            this.emit(type, payload, requestId);
        };
        window.addEventListener('message', this.onWindowMessage);
    }
}
exports.default = WindowMessageEventsEmitter;
